using Website_Progress.Interfaces;
using Website_Progress.Models;

namespace Website_Progress.Repositories
{
    public class InMemoryNewsRepository : INewsRepository
    {
        private int _instanceCounter = 0;

        private readonly List<NewsViewModel> _news;

        public InMemoryNewsRepository()
        {
            _news =
            [
                new NewsViewModel(++_instanceCounter, "Проведена проверка изделия AK SDR в полевых условиях",
                "Специалисты лаборатории завершили цикл натурных испытаний комплекса AK SDR в условиях реальной эксплуатационной обстановки. В ходе тестирования была проверена устойчивость работы устройства при различных сценариях радиочастотной нагрузки, а также точность определения и классификации сигналов. По итогам испытаний подтверждена стабильность функционирования системы и соответствие заявленным техническим характеристикам. Полученные данные будут использованы для финальной калибровки алгоритмов обработки спектра.",
                "/img/product2.png", new DateOnly(2026, 2, 10)),
                new NewsViewModel(++_instanceCounter, "Отладка устройства VVizor",
                "Продолжается этап программно-аппаратной отладки модуля VVizor. Инженерами проводится оптимизация обработки видеопотока и повышение устойчивости передачи данных. Особое внимание уделяется снижению задержек и повышению качества фиксации источников сигнала. В рамках текущего этапа внесены изменения в прошивку устройства, направленные на повышение энергоэффективности и стабильности работы при длительной эксплуатации.",
                "/img/product3.png", new DateOnly(2026, 2, 2)),
                new NewsViewModel(++_instanceCounter, "Выпущена очередная партия МЭМС",
                "Производственный отдел завершил сборку и тестирование новой партии модулей МЭМС. Перед отгрузкой каждая единица прошла обязательную проверку параметров позиционирования и устойчивости к внешним воздействиям. Устройства подготовлены к интеграции в состав комплексных систем и будут направлены заказчикам в соответствии с графиком поставок.",
                "/img/product4.png", new DateOnly(2026, 1, 25)),
                new NewsViewModel(++_instanceCounter, "Завершена модернизация программного комплекса анализа спектра",
                "Инженерный отдел внедрил обновлённые алгоритмы цифровой фильтрации и автоматической классификации сигналов. В результате повышена точность обнаружения слабых источников излучения и сокращено время обработки данных. Новая версия программного обеспечения уже проходит внутреннее тестирование и готовится к интеграции в изделия серии AK SDR.",
                "/img/product2.png", new DateOnly(2025, 1, 28)),
                new NewsViewModel(++_instanceCounter, "Проведены интеграционные испытания комплекса с модулем МЭМС",
                "Специалисты лаборатории выполнили тестирование совместной работы аппаратных модулей в составе единой системы. Проверена синхронизация данных позиционирования и радиочастотного анализа, а также устойчивость обмена информацией между узлами комплекса. По результатам испытаний подтверждена корректность взаимодействия оборудования и готовность к дальнейшим полевым тестам.",
                "/img/product2.png", new DateOnly(2025, 12, 16)),
                new NewsViewModel(++_instanceCounter, "Расширение функционала VVizor: внедрение режима интеллектуальной фильтрации",
                "В рамках развития устройства VVizor реализован новый режим обработки видеопотока с элементами адаптивной фильтрации. Это позволило повысить чёткость фиксации передатчиков в условиях помех и сложной освещённости. В ближайшее время планируется проведение демонстрационных испытаний обновлённой версии системы.",
                "/img/product2.png", new DateOnly(2025, 12, 10)),
            ];
        }

        public List<NewsViewModel> GetAll() => _news;

        public NewsViewModel? TryGetById(int id) => _news.FirstOrDefault(product => product.Id == id);

    }
}
